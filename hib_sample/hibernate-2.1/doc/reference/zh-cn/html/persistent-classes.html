<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#25345;&#20037;&#21270;&#31867;(Persistent Classes)</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;"><link rel="up" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;"><link rel="previous" href="session-configuration.html" title="&#31532;&nbsp;3&nbsp;&#31456;&nbsp;SessionFactory&#37197;&#32622;"><link rel="next" href="mapping.html" title="&#31532;&nbsp;5&nbsp;&#31456;&nbsp;O/R Mapping&#22522;&#30784;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#25345;&#20037;&#21270;&#31867;(Persistent Classes)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="session-configuration.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="mapping.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="persistent-classes"></a>&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#25345;&#20037;&#21270;&#31867;(Persistent Classes)</h2></div></div><div></div></div><p>
        &#25345;&#20037;&#21270;&#31867;&#26159;&#24212;&#29992;&#31243;&#24207;&#29992;&#26469;&#35299;&#20915;&#21830;&#19994;&#38382;&#39064;&#30340;&#31867;&#65288;&#27604;&#22914;&#65292;&#22312;&#30005;&#23376;&#20132;&#26131;&#31243;&#24207;&#20013;&#30340;Customer&#21644;Order&#65289;&#12290;&#25345;&#20037;&#21270;&#31867;&#65292;&#23601;&#22914;&#21516;&#23427;&#30340;&#21517;&#23383;&#26263;&#31034;&#30340;&#65292;&#26159;&#30701;&#26242;&#23384;&#22312;&#30340;&#65292;&#23427;&#30340;&#23454;&#20363;&#20250;&#34987;&#25345;&#20037;&#24615;&#20445;&#23384;&#20110;&#25968;&#25454;&#24211;&#20013;&#12290;
    </p><p>
        &#22914;&#26524;&#36825;&#20123;&#31867;&#31526;&#21512;&#31616;&#21333;&#30340;&#35268;&#21017;&#65292;Hibernate&#33021;&#22815;&#24037;&#20316;&#24471;&#26368;&#22909;&#65292;&#36825;&#20123;&#35268;&#21017;&#23601;&#26159;Plain Old Java Object (POJO&#65292;&#31616;&#21333;&#20256;&#32479;Java&#23545;&#35937;)&#32534;&#31243;&#27169;&#22411;&#12290;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-pojo"></a>4.1.&nbsp;POJO&#31616;&#21333;&#31034;&#20363;</h2></div></div><div></div></div><p>
            &#22823;&#22810;&#25968;java&#31243;&#24207;&#38656;&#35201;&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#30340;&#34920;&#31034;&#26041;&#27861;&#12290;
        </p><pre class="programlisting">package eg;
import java.util.Set;
import java.util.Date;

public class Cat {
    private Long id; // identifier
    private String name;
    private Date birthdate;
    private Cat mate;
    private Set kittens
    private Color color;
    private char sex;
    private float weight;

    private void setId(Long id) {
        this.id=id;
    }
    public Long getId() {
        return id;
    }

    void setName(String name) {
        this.name = name;
    }
    public String getName() {
        return name;
    }

    void setMate(Cat mate) {
        this.mate = mate;
    }
    public Cat getMate() {
        return mate;
    }

    void setBirthdate(Date date) {
        birthdate = date;
    }
    public Date getBirthdate() {
        return birthdate;
    }
    void setWeight(float weight) {
        this.weight = weight;
    }
    public float getWeight() {
        return weight;
    }

    public Color getColor() {
        return color;
    }
    void setColor(Color color) {
        this.color = color;
    }
    void setKittens(Set kittens) {
        this.kittens = kittens;
    }
    public Set getKittens() {
        return kittens;
    }
    // addKitten not needed by Hibernate
    public void addKitten(Cat kitten) {
        kittens.add(kitten);
    }
    void setSex(char sex) {
        this.sex=sex;
    }
    public char getSex() {
        return sex;
    }
}</pre><p>
            &#26377;&#22235;&#26465;&#20027;&#35201;&#30340;&#35268;&#21017;&#65306;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-classes-pojo-accessors"></a>4.1.1.&nbsp;&#20026;&#25345;&#20037;&#21270;&#23383;&#27573;&#22768;&#26126;&#35775;&#38382;&#22120;(accessors)&#21644;&#26159;&#21542;&#21487;&#21464;&#30340;&#26631;&#24535;(mutators)</h3></div></div><div></div></div><p>
                <tt class="literal">Cat</tt>&#20026;&#23427;&#30340;&#25152;&#26377;&#21487;&#25345;&#20037;&#21270;&#23383;&#27573;&#22768;&#26126;&#20102;&#35775;&#38382;&#26041;&#27861;&#12290;&#24456;&#22810;&#20854;&#20182;ORM&#24037;&#20855;&#30452;&#25509;&#23545;&#23454;&#20363;&#21464;&#37327;&#36827;&#34892;&#25345;&#20037;&#21270;&#12290;&#25105;&#20204;&#30456;&#20449;&#22312;&#25345;&#20037;&#21270;&#26426;&#21046;&#20013;&#19981;&#38480;&#23450;&#36825;&#31181;&#23454;&#29616;&#32454;&#33410;&#65292;&#24863;&#35273;&#35201;&#22909;&#24471;&#22810;&#12290;Hibernate&#23545;JavaBeans&#39118;&#26684;&#30340;&#23646;&#24615;&#23454;&#34892;&#25345;&#20037;&#21270;&#65292;&#37319;&#29992;&#22914;&#19979;&#26684;&#24335;&#26469;&#36776;&#35748;&#26041;&#27861;&#65306;<tt class="literal">getFoo</tt>, <tt class="literal">isFoo</tt> &#21644; <tt class="literal">setFoo</tt>&#12290;
            </p><p>
                &#23646;&#24615;<span class="emphasis"><em>&#19981;&#19968;&#23450;</em></span>&#38656;&#35201;&#22768;&#26126;&#20026;public&#30340;&#12290;Hibernate&#21487;&#20197;&#23545;default,<tt class="literal">protected</tt>&#25110;&#32773;<tt class="literal">private</tt>&#30340;get/set&#26041;&#27861;&#23545;&#30340;&#23646;&#24615;&#19968;&#35270;&#21516;&#20161;&#22320;&#25191;&#34892;&#25345;&#20037;&#21270;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-classes-pojo-constructor"></a>4.1.2.&nbsp;&#23454;&#29616;&#19968;&#20010;&#40664;&#35748;&#30340;&#26500;&#36896;&#26041;&#27861;&#65288;constructor&#65289;</h3></div></div><div></div></div><p>
                <tt class="literal">Cat</tt>&#26377;&#19968;&#20010;&#26174;&#24335;&#30340;&#26080;&#21442;&#25968;&#40664;&#35748;&#26500;&#36896;&#26041;&#27861;&#12290;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#31867;&#37117;&#24517;&#39035;&#20855;&#26377;&#19968;&#20010;&#40664;&#35748;&#30340;&#26500;&#36896;&#26041;&#27861;&#65288;&#21487;&#20197;&#19981;&#26159;public&#30340;&#65289;&#65292;&#36825;&#26679;&#30340;&#35805;Hibernate&#23601;&#21487;&#20197;&#20351;&#29992;<tt class="literal">Constructor.newInstance()</tt>&#26469;&#23454;&#20363;&#21270;&#23427;&#20204;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-classes-pojo-identifier"></a>4.1.3.&nbsp;&#25552;&#20379;&#19968;&#20010;&#26631;&#35782;&#23646;&#24615;&#65288;identifier property&#65289;&#65288;&#21487;&#36873;&#65289; </h3></div></div><div></div></div><p>
                <tt class="literal">Cat</tt>&#26377;&#19968;&#20010;&#23646;&#24615;&#21483;&#20570;<tt class="literal">id</tt>&#12290;&#36825;&#20010;&#23646;&#24615;&#21253;&#21547;&#20102;&#25968;&#25454;&#24211;&#34920;&#20013;&#30340;&#20027;&#20851;&#38190;&#23383;&#23383;&#27573;&#12290;&#36825;&#20010;&#23646;&#24615;&#21487;&#20197;&#21483;&#20219;&#20309;&#21517;&#23383;&#65292;&#20854;&#31867;&#22411;&#21487;&#20197;&#26159;&#20219;&#20309;&#30340;&#21407;&#22987;&#31867;&#22411;&#12289;&#21407;&#22987;&#31867;&#22411;&#30340;&#21253;&#35013;&#31867;&#22411;&#12289;<tt class="literal">java.lang.String</tt> &#25110;&#32773;&#26159; <tt class="literal">java.util.Date</tt>&#12290;&#65288;&#22914;&#26524;&#20320;&#30340;&#32769;&#24335;&#25968;&#25454;&#24211;&#34920;&#26377;&#32852;&#21512;&#20027;&#38190;&#65292;&#20320;&#29978;&#33267;&#21487;&#20197;&#29992;&#19968;&#20010;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#31867;&#65292;&#20854;&#20013;&#27599;&#20010;&#23646;&#24615;&#37117;&#26159;&#36825;&#20123;&#31867;&#22411;&#20043;&#19968;&#12290;&#21442;&#35265;&#21518;&#38754;&#30340;&#20851;&#20110;&#32852;&#21512;&#26631;&#35782;&#31526;&#30340;&#31456;&#33410;&#12290;&#65289;
            </p><p>
                &#29992;&#20110;&#26631;&#35782;&#30340;&#23646;&#24615;&#26159;&#21487;&#36873;&#30340;&#12290;&#20320;&#21487;&#20197;&#19981;&#31649;&#23427;&#65292;&#35753;Hibernate&#20869;&#37096;&#26469;&#36861;&#36394;&#23545;&#35937;&#30340;&#35782;&#21035;&#12290;&#24403;&#28982;&#65292;&#23545;&#20110;&#22823;&#22810;&#25968;&#24212;&#29992;&#31243;&#24207;&#26469;&#35828;&#65292;&#36825;&#26159;&#19968;&#20010;&#22909;&#30340;&#65288;&#20063;&#26159;&#24456;&#27969;&#34892;&#30340;&#65289;&#35774;&#35745;&#20915;&#23450;&#12290;
            </p><p>
                &#26356;&#36827;&#19968;&#27493;&#65292;&#19968;&#20123;&#21151;&#33021;&#21482;&#33021;&#23545;&#22768;&#26126;&#20102;&#26631;&#35782;&#23646;&#24615;&#30340;&#31867;&#36215;&#20316;&#29992;&#65306;
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                        &#32423;&#32852;&#26356;&#26032;&#65288;Cascaded updates&#65289;&#65288;&#21442;&#38405;&#8220;&#33258;&#31649;&#29702;&#29983;&#21629;&#21608;&#26399;&#30340;&#23545;&#35937;&#65288;Lifecycle Objects&#65289;&#8221;&#65289;
                    </p></li><li><p>
                        <tt class="literal">Session.saveOrUpdate()</tt>
                    </p></li></ul></div><p>
                &#25105;&#20204;&#24314;&#35758;&#20320;&#23545;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#31867;&#37319;&#21462;&#21516;&#26679;&#30340;&#21517;&#23383;&#20316;&#20026;&#26631;&#35782;&#23646;&#24615;&#12290;&#26356;&#36827;&#19968;&#27493;&#65292;&#25105;&#20204;&#24314;&#35758;&#20320;&#20351;&#29992;&#19968;&#20010;&#21487;&#20197;&#20026;&#31354;&#65288;&#20063;&#23601;&#26159;&#35828;&#65292;&#19981;&#26159;&#21407;&#22987;&#31867;&#22411;&#65289;&#30340;&#31867;&#22411;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-classes-pojo-final"></a>4.1.4.&nbsp;&#24314;&#35758;&#20351;&#29992;&#19981;&#26159;final&#30340;&#31867; (&#21487;&#36873;)</h3></div></div><div></div></div><p>
            	Hibernate&#30340;&#20851;&#38190;&#21151;&#33021;&#20043;&#19968;&#65292;<span class="emphasis"><em>&#20195;&#29702;&#65288;proxies&#65289;</em></span>&#65292;&#35201;&#27714;&#25345;&#20037;&#21270;&#31867;&#19981;&#26159;final&#30340;&#65292;&#25110;&#32773;&#26159;&#19968;&#20010;&#20840;&#37096;&#26041;&#27861;&#37117;&#26159;public&#30340;&#25509;&#21475;&#30340;&#20855;&#20307;&#23454;&#29616;&#12290;
            </p><p>
            	&#20320;&#21487;&#20197;&#23545;&#19968;&#20010;<tt class="literal">final</tt>&#30340;&#65292;&#20063;&#27809;&#26377;&#23454;&#29616;&#25509;&#21475;&#30340;&#31867;&#25191;&#34892;&#25345;&#20037;&#21270;&#65292;&#20294;&#26159;&#19981;&#33021;&#23545;&#23427;&#20204;&#20351;&#29992;&#20195;&#29702;&#8212;&#8212;&#22810;&#22810;&#23569;&#23569;&#20250;&#24433;&#21709;&#20320;&#36827;&#34892;&#24615;&#33021;&#20248;&#21270;&#30340;&#36873;&#25321;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-inheritance"></a>4.2.&nbsp;&#23454;&#29616;&#32487;&#25215;&#65288;Inheritance&#65289;</h2></div></div><div></div></div><p>
            &#23376;&#31867;&#20063;&#24517;&#39035;&#36981;&#23432;&#31532;&#19968;&#26465;&#21644;&#31532;&#20108;&#26465;&#35268;&#21017;&#12290;&#23427;&#20174;<tt class="literal">Cat</tt>&#32487;&#25215;&#20102;&#26631;&#35782;&#23646;&#24615;&#12290;
        </p><pre class="programlisting">package eg;

public class DomesticCat extends Cat {
        private String name;

        public String getName() {
                return name;
        }
        protected void setName(String name) {
                this.name=name;
        }
}</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-equalshashcode"></a>4.3.&nbsp;&#23454;&#29616;<tt class="literal">equals()</tt>&#21644;<tt class="literal">hashCode()</tt></h2></div></div><div></div></div><p>
            &#22914;&#26524;&#20320;&#38656;&#35201;&#28151;&#21512;&#20351;&#29992;&#25345;&#20037;&#21270;&#31867;&#65288;&#27604;&#22914;&#65292;&#22312;&#19968;&#20010;<tt class="literal">Set</tt>&#20013;&#65289;&#65292;&#20320;&#24517;&#39035;&#37325;&#36733;<tt class="literal">equals()</tt> &#21644; <tt class="literal">hashCode()</tt>&#26041;&#27861;&#12290;
        </p><p>
            <span class="emphasis"><em>&#36825;&#20165;&#36866;&#29992;&#20110;&#37027;&#20123;&#22312;&#20004;&#20010;&#19981;&#21516;&#30340;<tt class="literal">Session</tt>&#20013;&#35013;&#36733;&#30340;&#23545;&#35937;&#65292;Hibernate&#22312;&#21333;&#20010;<tt class="literal">Session</tt>&#20013;&#20165;&#20445;&#35777;JVM &#36776;&#21035;&#65288;<tt class="literal"> a == b </tt>&#65292;<tt class="literal">equals()</tt>&#30340;&#40664;&#35748;&#23454;&#29616;&#65289;&#65281;</em></span>
        </p><p>
            &#23601;&#31639;&#20004;&#20010;&#23545;&#35937;<tt class="literal">a</tt>&#21644;<tt class="literal">b</tt>&#23454;&#38469;&#26159;&#21516;&#19968;&#34892;&#25968;&#25454;&#24211;&#20869;&#23481;&#65288;&#23427;&#20204;&#25317;&#26377;&#21516;&#26679;&#30340;&#20027;&#38190;&#20540;&#20316;&#20026;&#36776;&#35782;&#31526;&#65289;&#65292;&#25105;&#20204;&#20063;&#19981;&#33021;&#20445;&#35777;&#22312;&#29305;&#23450;&#30340;<tt class="literal">Session</tt> &#20043;&#22806;&#23427;&#20204;&#26159;&#21516;&#19968;&#20010;Java&#23454;&#20363;&#12290;
        </p><p>
            &#26368;&#26174;&#32780;&#26131;&#35265;&#30340;&#23454;&#29616;<tt class="literal">equals()</tt>/<tt class="literal">hashCode()</tt>&#26041;&#27861;&#30340;&#21150;&#27861;&#23601;&#26159;&#27604;&#36739;&#20004;&#20010;&#23545;&#35937;&#30340;&#26631;&#35782;&#20540;&#12290;&#22914;&#26524;&#36825;&#20010;&#20540;&#26159;&#21516;&#22530;&#30340;&#65292;&#20182;&#20204;&#24517;&#23450;&#26159;&#30452;&#32447;&#21516;&#19968;&#26465;&#25968;&#25454;&#24211;&#34892;&#65292;&#25152;&#20197;&#23427;&#20204;&#26159;&#30456;&#31561;&#30340;&#65288;&#22914;&#26524;&#37117;&#34987;&#21152;&#20837;&#21040;<tt class="literal">Set</tt>&#65292;&#22312;<tt class="literal">Set</tt>&#20013;&#21482;&#24212;&#35813;&#20986;&#29616;&#19968;&#20010;&#20803;&#32032;&#65289;&#12290;&#19981;&#24184;&#30340;&#26159;&#65292;&#25105;&#20204;&#19981;&#33021;&#20351;&#29992;&#36825;&#31181;&#21150;&#27861;&#12290;Hibernate&#21482;&#20250;&#23545;&#24050;&#32463;&#25345;&#20037;&#21270;&#30340;&#23545;&#35937;&#36171;&#20104;&#26631;&#35782;&#20540;&#65292;&#26032;&#21019;&#24314;&#30340;&#23454;&#20363;&#23558;&#19981;&#20250;&#26377;&#20219;&#20309;&#26631;&#35782;&#31526;&#20540;&#65281;&#25105;&#20204;&#25512;&#33616;&#20351;&#29992;<span class="emphasis"><em>&#21830;&#19994;&#20851;&#38190;&#23383;&#30456;&#31561;</em></span>&#21407;&#21017;&#26469;&#23454;&#29616;<tt class="literal">equals()</tt>&#21644;<tt class="literal">hashCode()</tt>&#12290;
        </p><p>
            &#21830;&#19994;&#20851;&#38190;&#23383;&#30456;&#31561;&#24847;&#21619;&#30528;<tt class="literal">equals()</tt>&#26041;&#27861;&#21482;&#27604;&#36739;&#37027;&#20123;&#32452;&#25104;&#21830;&#19994;&#20851;&#38190;&#23383;&#30340;&#23646;&#24615;&#65292;&#23427;&#23545;&#24212;&#30528;&#30495;&#23454;&#19990;&#30028;&#20013;&#30340;&#23454;&#20363;&#65288;<span class="emphasis"><em>&#33258;&#28982;</em></span>&#30340;&#20505;&#36873;&#20851;&#38190;&#23383;&#65289;
        </p><pre class="programlisting">public class Cat {

    ...
    public boolean equals(Object other) {
        if (this == other) return true;
        if (!(other instanceof Cat)) return false;

        final Cat cat = (Cat) other;

        if (!getName().equals(cat.getName())) return false;
        if (!getBirthday().equals(cat.getBirthday())) return false;

        return true;
    }

    public int hashCode() {
        int result;
        result = getName().hashCode();
        result = 29 * result + getBirthday().hashCode();
        return result;
    }

}</pre><p>
            &#35760;&#20303;&#25105;&#20204;&#30340;&#20505;&#36873;&#20851;&#38190;&#23383;&#65288;&#36825;&#20010;&#20363;&#23376;&#20013;&#26159;&#21517;&#23383;&#21644;&#29983;&#26085;&#30340;&#32452;&#21512;&#65289;&#21482;&#22312;&#29305;&#23450;&#30340;&#27604;&#36739;&#25805;&#20316;&#20013;&#26377;&#25928;&#65288;&#21487;&#33021;&#21482;&#22312;&#19968;&#20010;&#29992;&#20363;&#20013;&#65289;&#12290;&#25105;&#20204;&#19981;&#38656;&#35201;&#25105;&#20204;&#36890;&#24120;&#29992;&#20110;&#27491;&#24335;&#20027;&#38190;&#37027;&#20040;&#20005;&#26684;&#31283;&#23450;&#30340;&#26465;&#20214;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-lifecycle"></a>4.4.&nbsp;&#25345;&#20037;&#21270;&#29983;&#21629;&#21608;&#26399;&#65288;Lifecycle&#65289;&#20013;&#30340;&#22238;&#35843;&#65288;Callbacks&#65289;</h2></div></div><div></div></div><p>
            &#20316;&#20026;&#19968;&#20010;&#21487;&#36873;&#30340;&#27493;&#39588;&#65292;&#21487;&#25345;&#20037;&#21270;&#31867;&#21487;&#20197;&#23454;&#29616;<tt class="literal">Lifecycle</tt>&#25509;&#21475;&#65292;&#23427;&#21487;&#20197;&#25552;&#20379;&#19968;&#20123;&#29992;&#20110;&#22238;&#35843;&#30340;&#26041;&#27861;&#65292;&#21487;&#20197;&#35753;&#25345;&#20037;&#21270;&#23545;&#35937;&#22312;save&#25110;load&#20043;&#21518;&#65292;&#25110;&#32773;&#22312;delete&#25110;update&#20043;&#21069;&#36827;&#34892;&#24517;&#35201;&#30340;&#21021;&#22987;&#21270;&#19982;&#28165;&#38500;&#27493;&#39588;&#12290;
        </p><p>
            
            Hibernate <tt class="literal">Interceptor</tt>&#65288;&#25318;&#25130;&#22120;&#65289;&#36824;&#25552;&#20379;&#20102;&#19968;&#31181;&#36739;&#23569;&#24178;&#25200;&#30340;&#26367;&#20195;&#26041;&#27861;&#12290;
        </p><div class="programlistingco"><pre class="programlisting">public interface Lifecycle {
        public boolean onSave(Session s) throws CallbackException;   <span class="co">(1)</span>
        public boolean onUpdate(Session s) throws CallbackException; <span class="co">(2)</span>
        public boolean onDelete(Session s) throws CallbackException; <span class="co">(3)</span>
        public void onLoad(Session s, Serializable id);              <span class="co">(4)</span>
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                        <tt class="literal">onSave</tt> - &#22312;&#23545;&#35937;&#21363;&#23558;&#34987;save&#25110;&#32773;insert&#30340;&#26102;&#20505;&#22238;&#35843;
                        
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                        <tt class="literal">onUpdate</tt> - &#22312;&#23545;&#35937;&#21363;&#23558;&#34987;update&#30340;&#26102;&#20505;&#22238;&#35843;&#65288;&#20063;&#23601;&#26159;&#23545;&#35937;&#34987;&#20256;&#36882;&#32473;<tt class="literal">Session.update()</tt>&#30340;&#26102;&#20505;)
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                        <tt class="literal">onDelete</tt> - &#22312;&#23545;&#35937;&#21363;&#23558;&#34987;delete(&#21024;&#38500;)&#30340;&#26102;&#20505;&#22238;&#35843;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                        <tt class="literal">onLoad</tt> - &#22312;&#23545;&#35937;&#21018;&#21018;&#34987;load(&#35013;&#36733;)&#21518;&#30340;&#26102;&#20505;&#22238;&#35843;
                    </p></td></tr></table></div></div><p>
            <tt class="literal">onSave()</tt>, <tt class="literal">onDelete()</tt> &#21644; <tt class="literal">onUpdate()</tt> &#21487;&#20197;&#34987;&#29992;&#26469;&#32423;&#32852;&#20445;&#23384;&#25110;&#32773;&#21024;&#38500;&#20381;&#36182;&#30340;&#23545;&#35937;&#12290;&#36825;&#31181;&#20570;&#27861;&#26159;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#22768;&#26126;&#32423;&#32852;&#25805;&#20316;&#22806;&#30340;&#21478;&#22806;&#19968;&#31181;&#36873;&#25321;&#12290;<tt class="literal">onLoad()</tt>&#21487;&#20197;&#29992;&#26469;&#35753;&#23545;&#35937;&#20174;&#20854;&#25345;&#20037;&#21270;&#65288;&#24403;&#21069;&#65289;&#29366;&#24577;&#20013;&#21021;&#22987;&#21270;&#26576;&#20123;&#26242;&#26102;&#30340;&#23646;&#24615;&#12290;&#19981;&#33021;&#29992;&#36825;&#31181;&#26041;&#24335;&#26469;&#35013;&#36733;&#20381;&#36182;&#30340;&#23545;&#35937;&#65292;&#22240;&#20026;&#21487;&#33021;&#26080;&#27861;&#22312;&#27492;&#26041;&#27861;&#20869;&#37096;&#35843;&#29992;<tt class="literal">Session</tt>&#25509;&#21475;&#12290; <tt class="literal">onLoad()</tt>, <tt class="literal">onSave()</tt>&#21644; <tt class="literal">onUpdate()</tt>&#21478;&#19968;&#31181;&#29992;&#27861;&#26159;&#29992;&#26469;&#22312;&#24403;&#21069;<tt class="literal">Session</tt>&#20013;&#20445;&#23384;&#19968;&#20010;&#24341;&#29992;&#65292;&#24050;&#22791;&#21518;&#29992;&#12290;
            
        </p><p>
            &#35831;&#27880;&#24847;<tt class="literal">onUpdate()</tt>&#24182;&#19981;&#26159;&#22312;&#27599;&#27425;&#23545;&#35937;&#30340;&#25345;&#20037;&#21270;&#29366;&#24577;&#34987;&#26356;&#26032;&#30340;&#26102;&#20505;&#23601;&#34987;&#35843;&#29992;&#30340;&#12290;&#23427;&#21482;&#22312;&#22788;&#20110;&#23578;&#26410;&#34987;&#25345;&#20037;&#21270;&#30340;&#23545;&#35937;&#34987;&#20256;&#36882;&#32473;<tt class="literal">Session.update()</tt>&#30340;&#26102;&#20505;&#25165;&#20250;&#34987;&#35843;&#29992;&#12290;
        </p><p>
           	&#22914;&#26524;<tt class="literal">onSave()</tt>, <tt class="literal">onUpdate()</tt> &#25110;&#32773;  <tt class="literal">onDelete()</tt>&#36820;&#22238;<tt class="literal">true</tt>&#65292;&#37027;&#20040;&#25805;&#20316;&#23601;&#34987;&#24708;&#24708;&#22320;&#21462;&#28040;&#20102;&#12290;&#22914;&#26524;&#20854;&#20013;&#25243;&#20986;&#20102;<tt class="literal">CallbackException</tt>&#24322;&#24120;&#65292;&#25805;&#20316;&#34987;&#21462;&#28040;&#65292;&#36825;&#20010;&#24322;&#24120;&#20250;&#34987;&#32487;&#32493;&#20256;&#36882;&#32473;&#24212;&#29992;&#31243;&#24207;&#12290;
        </p><p>
            &#35831;&#27880;&#24847;<tt class="literal">onSave()</tt>&#26159;&#22312;&#26631;&#35782;&#31526;&#24050;&#32463;&#34987;&#36171;&#20104;&#23545;&#35937;&#21518;&#35843;&#29992;&#30340;&#65292;&#38500;&#38750;&#26159;&#20351;&#29992;&#26412;&#22320;(native)&#26041;&#24335;&#29983;&#25104;&#20851;&#38190;&#23383;&#30340;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-validatable"></a>4.5.&nbsp;&#21512;&#27861;&#24615;&#26816;&#26597;&#65288;Validatable&#65289;&#22238;&#35843;</h2></div></div><div></div></div><p>
            &#22914;&#26524;&#25345;&#20037;&#21270;&#31867;&#38656;&#35201;&#22312;&#20445;&#23384;&#20854;&#25345;&#20037;&#21270;&#29366;&#24577;&#21069;&#36827;&#34892;&#21512;&#27861;&#24615;&#26816;&#26597;&#65292;&#23427;&#21487;&#20197;&#23454;&#29616;&#19979;&#38754;&#30340;&#25509;&#21475;&#65306;
        </p><pre class="programlisting">public interface Validatable {
        public void validate() throws ValidationFailure;
}</pre><p>
            &#22914;&#26524;&#21457;&#29616;&#23545;&#35937;&#36829;&#21453;&#20102;&#26576;&#26465;&#35268;&#21017;&#65292;&#24212;&#35813;&#25243;&#20986;&#19968;&#20010;<tt class="literal">ValidationFailure</tt>&#24322;&#24120;&#12290;&#22312;<tt class="literal">Validatable</tt>&#23454;&#20363;&#30340;<tt class="literal">validate()</tt>&#26041;&#27861;&#20869;&#37096;&#19981;&#24212;&#35813;&#25913;&#21464;&#23427;&#30340;&#29366;&#24577;&#12290;
        </p><p>
            &#21644;<tt class="literal">Lifecycle</tt>&#25509;&#21475;&#30340;&#22238;&#35843;&#26041;&#27861;&#19981;&#21516;&#65292;<tt class="literal">validate()</tt>&#21487;&#33021;&#22312;&#20219;&#20309;&#26102;&#38388;&#34987;&#35843;&#29992;&#12290;&#24212;&#29992;&#31243;&#24207;&#19981;&#24212;&#35813;&#25226;<tt class="literal">validate()</tt>&#35843;&#29992;&#21644;&#21830;&#19994;&#21151;&#33021;&#32852;&#31995;&#36215;&#26469;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-xdoclet"></a>4.6.&nbsp;XDoclet&#26631;&#35760;&#31034;&#20363;</h2></div></div><div></div></div><p>
            &#19979;&#19968;&#31456;&#20013;&#25105;&#20204;&#23558;&#20250;&#23637;&#31034;Hibernate&#26144;&#23556;&#26159;&#22914;&#20309;&#29992;&#31616;&#21333;&#30340;&#65292;&#21487;&#38405;&#35835;&#30340;XML&#26684;&#24335;&#34920;&#36798;&#30340;&#12290;&#24456;&#22810;Hibernate&#29992;&#25143;&#21916;&#27426;&#20351;&#29992;XDoclet&#30340;<tt class="literal">@hibernate.tags</tt>&#26631;&#31614;&#30452;&#25509;&#22312;&#28304;&#20195;&#30721;&#20013;&#23884;&#20837;&#26144;&#23556;&#20449;&#24687;&#12290;&#25105;&#20204;&#19981;&#20250;&#22312;&#36825;&#20221;&#25991;&#26723;&#20013;&#35752;&#35770;&#36825;&#20010;&#35805;&#39064;&#65292;&#22240;&#20026;&#20005;&#26684;&#30340;&#26469;&#35828;&#36825;&#23646;&#20110;XDoclet&#30340;&#19968;&#37096;&#20998;&#12290;&#20294;&#25105;&#20204;&#20173;&#28982;&#22312;&#36825;&#37324;&#32473;&#20986;&#19968;&#20221;&#24102;&#26377;XDoclet&#26144;&#23556;&#30340;<tt class="literal">Cat</tt>&#31867;&#30340;&#31034;&#20363;&#12290;
        </p><pre class="programlisting">package eg;
import java.util.Set;
import java.util.Date;

/**
 * @hibernate.class
 *  table="CATS"
 */
public class Cat {
    private Long id; // identifier
    private Date birthdate;
    private Cat mate;
    private Set kittens
    private Color color;
    private char sex;
    private float weight;

    /**
     * @hibernate.id
     *  generator-class="native"
     *  column="CAT_ID"
     */
    public Long getId() {
        return id;
    }
    private void setId(Long id) {
        this.id=id;
    }

    /**
     * @hibernate.many-to-one
     *  column="MATE_ID"
     */
    public Cat getMate() {
        return mate;
    }
    void setMate(Cat mate) {
        this.mate = mate;
    }

    /**
     * @hibernate.property
     *  column="BIRTH_DATE"
     */
    public Date getBirthdate() {
        return birthdate;
    }
    void setBirthdate(Date date) {
        birthdate = date;
    }
    /**
     * @hibernate.property
     *  column="WEIGHT"
     */
    public float getWeight() {
        return weight;
    }
    void setWeight(float weight) {
        this.weight = weight;
    }

    /**
     * @hibernate.property
     *  column="COLOR"
     *  not-null="true"
     */
    public Color getColor() {
        return color;
    }
    void setColor(Color color) {
        this.color = color;
    }
    /**
     * @hibernate.set
     *  lazy="true"
     *  order-by="BIRTH_DATE"
     * @hibernate.collection-key
     *  column="PARENT_ID"
     * @hibernate.collection-one-to-many
     */
    public Set getKittens() {
        return kittens;
    }
    void setKittens(Set kittens) {
        this.kittens = kittens;
    }
    // addKitten not needed by Hibernate
    public void addKitten(Cat kitten) {
        kittens.add(kitten);
    }

    /**
     * @hibernate.property
     *  column="SEX"
     *  not-null="true"
     *  update="false"
     */
    public char getSex() {
        return sex;
    }
    void setSex(char sex) {
        this.sex=sex;
    }
}</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="session-configuration.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">&#19978;&#19968;&#32423;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="mapping.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;3&nbsp;&#31456;&nbsp;SessionFactory&#37197;&#32622;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;5&nbsp;&#31456;&nbsp;O/R Mapping&#22522;&#30784;</td></tr></table></div></body></html>