<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#22312;Tomcat&#20013;&#24555;&#36895;&#19978;&#25163;</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;"><link rel="up" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;"><link rel="previous" href="preface.html" title="&#21069;&#35328;"><link rel="next" href="architecture.html" title="&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20307;&#31995;&#32467;&#26500;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#22312;Tomcat&#20013;&#24555;&#36895;&#19978;&#25163;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="preface.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="architecture.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="quickstart"></a>&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#22312;Tomcat&#20013;&#24555;&#36895;&#19978;&#25163;</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="quickstart-intro"></a>1.1.&nbsp;&#24320;&#22987;Hibernate&#20043;&#26053;</h2></div></div><div></div></div><p>
            &#36825;&#20221;&#25945;&#31243;&#35299;&#37322;&#22914;&#20309;&#22312;Apache Tomcat servlet&#23481;&#22120;&#20013;&#20026;web&#31243;&#24207;&#23433;&#35013;Hibernate 2.1&#12290;Hibernate&#22312;&#22823;&#22810;&#25968;&#20027;&#27969;J2EE&#24212;&#29992;&#26381;&#21153;&#22120;
            &#30340;&#21463;&#31649;&#29702;&#29615;&#22659;&#20013;&#37117;&#21487;&#20197;&#33391;&#22909;&#36816;&#20316;&#65292;&#29978;&#33267;&#20063;&#21487;&#20197;&#22312;&#29420;&#31435;Java&#24212;&#29992;&#31243;&#24207;&#20013;&#36816;&#34892;&#12290;&#22312;&#26412;&#20363;&#20013;&#20351;&#29992;&#30340;&#31034;&#20363;&#25968;&#25454;&#24211;&#31995;&#32479;&#26159;PostgreSQL 7.3,&#24403;&#28982;&#20063;&#21487;&#20197;
            &#24456;&#23481;&#26131;&#30340;&#25903;&#25345;&#20854;&#20182;&#25968;&#25454;&#24211;&#65292;&#21482;&#38656;&#35201;&#20462;&#25913;Hibernate SQL&#26041;&#35328;&#30340;&#37197;&#32622;&#12290;
        </p><p>
            &#31532;&#19968;&#27493;&#65292;&#25105;&#20204;&#24517;&#39035;&#25335;&#36125;&#25152;&#26377;&#38656;&#35201;&#30340;&#36816;&#34892;&#24211;&#21040;Tomcat&#21435;&#12290;&#22312;&#36825;&#31687;&#25945;&#31243;&#20013;&#65292;&#25105;&#20204;&#20351;&#29992;&#19968;&#20010;&#21333;&#29420;&#30340;web&#31243;&#24207;&#65288;<tt class="literal">webapps/quickstart</tt>&#65289;&#12290;&#25105;&#20204;&#35201;&#32771;&#34385;&#20840;&#23616;&#24211;&#25991;&#20214;&#25628;&#32034;&#36335;&#24452;&#65288;<tt class="literal">TOMCAT/common/lib</tt>&#65289;&#21644;&#26412;web&#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#30340;&#31867;&#35013;&#36733;&#22120;&#25628;&#32034;&#36335;&#24452;&#65288;&#23545;&#20110;jar&#26469;&#35828;&#26159;<tt class="literal">webapps/quickstart/WEB-INF/lib</tt>&#65292;&#23545;&#20110;class&#25991;&#20214;&#26469;&#35828;&#26159;<tt class="literal">webapps/quickstart/WEB-INF/classes</tt>&#65289;&#12290;&#25105;&#20204;&#25226;&#36825;&#20004;&#20010;&#31867;&#35013;&#36733;&#22120;&#32423;&#21035;&#20998;&#21035;&#31216;&#20026;&#20840;&#23616;&#31867;&#36335;&#24452;(global classpath)&#21644;&#19978;&#19979;&#25991;&#31867;&#36335;&#24452;(context classpath)&#12290;
        </p><p>
            &#29616;&#22312;&#65292;&#25226;&#36825;&#20123;&#24211;&#25991;&#20214;copy&#21040;&#20004;&#20010;&#31867;&#36335;&#24452;&#21435;:
        </p><div class="orderedlist"><ol type="1"><li><p>
                   	&#25226;&#25968;&#25454;&#24211;&#38656;&#35201;&#30340;JDBC&#39537;&#21160;&#25335;&#36125;&#21040;&#20840;&#23616;&#31867;&#36335;&#24452;&#12290;&#36825;&#26159;tomcat&#38468;&#24102;&#30340;DBCP&#36830;&#25509;&#27744;&#36719;&#20214;&#25152;&#35201;&#27714;&#30340;&#12290;Hibernate&#20351;&#29992;JDBC&#36830;&#25509;&#26469;&#23545;&#25968;&#25454;&#24211;&#25191;&#34892;SQL&#65292;&#25152;&#20197;&#20320;&#35201;&#20040;&#25552;&#20379;&#22806;&#37096;&#36830;&#25509;&#27744;&#20013;&#30340;&#36830;&#25509;&#32473;Hibernate&#65292;&#25110;&#32773;&#37197;&#32622;Hibernate&#20351;&#29992;&#23427;&#33258;&#24049;&#30452;&#25509;&#25903;&#25345;&#30340;&#27744;&#65288;C3PO,Proxcool&#65289;&#12290;&#23545;&#20110;&#26412;&#25945;&#31243;&#26469;&#35828;&#65292;&#25226;<tt class="literal">pg73jdbc3.jar</tt>&#24211;&#25991;&#20214;&#65288;&#23545;&#24212;PostgreSQL 7.3&#21644;JDK 1.4)&#21040;&#20840;&#23616;&#31867;&#35013;&#36733;&#22120;&#36335;&#24452;&#21435;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#20351;&#29992;&#19968;&#20010;&#19981;&#21516;&#30340;&#25968;&#25454;&#24211;&#65292;&#25335;&#36125;&#30456;&#24212;&#30340;JDBC &#39537;&#21160;&#65289;&#12290;
                </p></li><li><p>
                    &#19981;&#35201;&#25335;&#36125;&#20219;&#20309;&#20854;&#20182;&#19996;&#35199;&#21040;&#20840;&#23616;&#31867;&#35013;&#36733;&#22120;&#21435;&#12290;&#21542;&#21017;&#20320;&#21487;&#33021;&#22312;&#19968;&#20123;&#24037;&#20855;&#19978;&#36935;&#21040;&#40635;&#28902;&#65292;&#27604;&#22914;log4j, commons-logging&#31561;&#12290;
                    &#35760;&#24471;&#35201;&#20351;&#29992;&#27599;&#20010;web&#24212;&#29992;&#31243;&#24207;&#33258;&#24049;&#30340;&#19978;&#19979;&#25991;&#31867;&#36335;&#24452;&#65292;&#23601;&#26159;&#35828;&#25226;&#20320;&#33258;&#24049;&#30340;&#31867;&#24211;&#25335;&#36125;&#21040;<tt class="literal">WEB-INF/lib</tt>&#19979;&#21435;&#65292;&#25226;&#37197;&#32622;&#25991;&#20214;configuration/property&#25335;&#36125;&#21040;<tt class="literal">WEB-INF/classes</tt>&#19979;&#38754;&#21435;&#12290;&#36825;&#20004;&#20010;&#30446;&#24405;&#40664;&#35748;&#37117;&#26159;&#19978;&#19979;&#25991;&#31867;&#36335;&#24452;&#32423;&#21035;&#30340;&#12290;
				</p></li><li><p>
                    Hibernate&#26412;&#36523;&#25171;&#21253;&#25104;&#19968;&#20010;JAR&#24211;&#12290;<tt class="literal">hibernate2.jar</tt>&#25991;&#20214;&#35201;&#21644;&#20320;&#24212;&#29992;&#31243;&#24207;&#30340;&#20854;&#20182;&#24211;&#25991;&#20214;&#19968;&#36215;&#25918;&#22312;&#19978;&#19979;&#25991;&#31867;&#36335;&#24452;&#20013;&#12290;&#22312;&#36816;&#34892;&#26102;&#65292;Hibernate&#36824;&#38656;&#35201;&#19968;&#20123;&#31532;&#19977;&#26041;&#24211;&#65292;&#23427;&#20204;&#22312;Hibernate&#21457;&#34892;&#21253;&#30340;<tt class="literal">lib/</tt>&#30446;&#24405;&#19979;&#12290;&#21442;&#35265;<a href="quickstart.html#3rdpartylibs" title="&#34920;&nbsp;1.1.&nbsp;&#xA;                Hibernate &#31532;&#19977;&#26041;&#24211;&#xA;            ">&#34920;&nbsp;1.1 &#8220;
                Hibernate &#31532;&#19977;&#26041;&#24211;
            &#8221;</a>&#12290;&#25226;&#20320;&#38656;&#35201;&#30340;&#31532;&#19977;&#26041;&#24211;&#25991;&#20214;&#20063;&#25335;&#36125;&#21040;&#19978;&#19979;&#25991;&#31867;&#36335;&#24452;&#21435;&#12290;
                </p></li></ol></div><div class="table"><a name="3rdpartylibs"></a><p class="title"><b>&#34920;&nbsp;1.1.&nbsp;
                Hibernate &#31532;&#19977;&#26041;&#24211;
            </b></p><table summary="&#xA;                Hibernate &#31532;&#19977;&#26041;&#24211;&#xA;            " border="1"><colgroup><col><col></colgroup><thead><tr><th align="center">
                            &#24211;
                        </th><th align="center">
                            &#25551;&#36848;
                        </th></tr></thead><tbody><tr><td>
                            dom4j (&#24517;&#38656;&#65289;
                        </td><td>
                            Hibernate&#22312;&#35299;&#26512;XML&#37197;&#32622;&#21644;XML&#26144;&#23556;&#20803;&#25991;&#20214;&#26102;&#38656;&#35201;&#20351;&#29992;dom4j&#12290;
                        </td></tr><tr><td>
                            CGLIB (&#24517;&#38656;&#65289;
                        </td><td>
                            Hibernate&#22312;&#36816;&#34892;&#26102;&#20351;&#29992;&#36825;&#20010;&#20195;&#30721;&#29983;&#25104;&#24211;&#24378;&#21270;&#31867;&#65288;&#19982;Java&#21453;&#23556;&#26426;&#21046;&#32852;&#21512;&#20351;&#29992;&#65289;&#12290;
                        </td></tr><tr><td>
                            Commons Collections, Commons Logging   (&#24517;&#38656;&#65289;
                        </td><td>
                            Hibernat&#20351;&#29992;Apache Jakarta Commons&#39033;&#30446;&#25552;&#20379;&#30340;&#22810;&#20010;&#24037;&#20855;&#31867;&#24211;&#12290;
                        </td></tr><tr><td>
                            ODMG4 (&#24517;&#38656;)
                        </td><td>
                            Hibernate&#25552;&#20379;&#20102;&#19968;&#20010;&#21487;&#36873;&#30340;ODMG&#20860;&#23481;&#25345;&#20037;&#21270;&#31649;&#29702;&#30028;&#38754;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#26144;&#23556;&#38598;&#21512;&#65292;&#20320;&#23601;&#38656;&#35201;&#36825;&#20010;&#31867;&#24211;&#65292;&#23601;&#31639;&#20320;&#19981;&#26159;&#20026;&#20102;&#20351;&#29992;ODMG API&#12290;&#25105;&#20204;&#22312;&#36825;&#20010;&#25945;&#31243;&#20013;&#27809;&#26377;&#20351;&#29992;&#38598;&#21512;&#26144;&#23556;&#65292;&#20294;&#19981;&#31649;&#24590;&#26679;&#25226;&#36825;&#20010;JAR&#25335;&#36125;&#36807;&#21435;&#24635;&#26159;&#19981;&#38169;&#30340;&#12290;
                        </td></tr><tr><td>
                            EHCache (&#24517;&#38656;)
                        </td><td>
                        	Hibernate&#21487;&#20197;&#20351;&#29992;&#19981;&#21516;&#30340;&#31532;&#20108;&#32423;Cache&#26041;&#26696;&#12290;&#22914;&#26524;&#27809;&#26377;&#20462;&#25913;&#37197;&#32622;&#30340;&#35805;&#65292;EHCache&#25552;&#20379;&#40664;&#35748;&#30340;Cache&#12290;
                        </td></tr><tr><td>
                            Log4j (&#21487;&#36873;)
                        </td><td>
                            Hibernate&#20351;&#29992;Commons Logging API,&#21518;&#32773;&#21487;&#20197;&#20351;&#29992;Log4j&#20316;&#20026;&#24213;&#23618;&#23454;&#26045;log&#30340;&#26426;&#21046;&#12290;&#22914;&#26524;&#19978;&#19979;&#25991;&#31867;&#30446;&#24405;&#20013;&#23384;&#22312;Log4j&#24211;&#65292;Commons Logging&#23601;&#20250;&#20351;&#29992;Log4j&#21644;&#23427;&#22312;&#19978;&#19979;&#25991;&#31867;&#36335;&#24452;&#20013;&#25214;&#21040;&#30340;<tt class="literal">log4j.properties</tt>&#25991;&#20214;&#12290;&#22312;Hibernate&#21457;&#34892;&#21253;&#20013;&#21253;&#21547;&#26377;&#19968;&#20010;&#31034;&#20363;&#30340;properties&#25991;&#20214;&#12290;&#25152;&#20197;&#65292;&#22914;&#26524;&#20320;&#24819;&#30475;&#30475;&#24149;&#24067;&#20043;&#21518;&#21040;&#24213;&#21457;&#29983;&#20102;&#20160;&#20040;&#65292;&#20063;&#25226;log4j.jar&#25335;&#36125;&#21040;&#20320;&#30340;&#19978;&#19979;&#25991;&#31867;&#36335;&#24452;&#21435;&#21543;&#65288;&#23427;&#20301;&#20110;<tt class="literal">src/</tt>&#30446;&#24405;&#20013;&#65289;&#12290;
                        </td></tr><tr><td>
                            &#20854;&#20182;&#25991;&#20214;&#26159;&#19981;&#26159;&#24517;&#38656;&#30340;&#65311;
                        </td><td>
                            &#35831;&#23519;&#30475;Hibernate&#21457;&#34892;&#21253;&#20013;&#30340;/lib/README.txt&#25991;&#20214;&#12290;&#36825;&#26159;&#19968;&#20010;Hibernate&#21457;&#34892;&#21253;&#20013;&#38468;&#24102;&#30340;&#31532;&#19977;&#26041;&#31867;&#24211;&#30340;&#21015;&#34920;&#65292;&#24635;&#26159;&#20445;&#25345;&#26356;&#26032;&#12290;&#20320;&#21487;&#20197;&#22312;&#37027;&#37324;&#25214;&#21040;&#25152;&#26377;&#24517;&#38656;&#25110;&#32773;&#21487;&#36873;&#30340;&#31867;&#24211;&#30340;&#21015;&#34920;&#12290;
                        </td></tr></tbody></table></div><p>
        &#25105;&#20204;&#29616;&#22312;&#26469;&#22312;Tomcat&#21644;Hibernate&#20013;&#37197;&#32622;&#20849;&#20139;&#30340;&#25968;&#25454;&#24211;&#36830;&#25509;&#27744;&#12290;&#20063;&#23601;&#26159;&#35828;Tomcat&#20250;&#25552;&#20379;&#32463;&#36807;&#27744;&#22788;&#29702;&#30340;JDBC&#36830;&#25509;&#65288;&#29992;&#23427;&#33258;&#24049;&#20869;&#32622;&#30340;DBCP&#36830;&#25509;&#27744;&#21151;&#33021;&#65289;&#65292;Hibernate&#36890;&#36807;JNDI&#26469;&#35831;&#27714;&#36825;&#20123;&#36830;&#25509;&#12290;Tomcat &#25226;&#36830;&#25509;&#27744;&#32465;&#23450;&#21040;JNDI,&#25105;&#20204;&#35201;&#22312;Tomcat&#30340;&#20027;&#37197;&#32622;&#25991;&#20214;&#65288;<tt class="literal">TOMCAT/conf/server.xml</tt>&#65289;&#20013;&#21152;&#19968;&#34892;&#36164;&#28304;&#22768;&#26126;:
        </p><pre class="programlisting">&lt;Context path="/quickstart" docBase="quickstart"&gt;
    &lt;Resource name="jdbc/quickstart" scope="Shareable" type="javax.sql.DataSource"/&gt;
    &lt;ResourceParams name="jdbc/quickstart"&gt;
        &lt;parameter&gt;
            &lt;name&gt;factory&lt;/name&gt;
            &lt;value&gt;org.apache.commons.dbcp.BasicDataSourceFactory&lt;/value&gt;
        &lt;/parameter&gt;

        &lt;!-- DBCP database connection settings --&gt;
        &lt;parameter&gt;
            &lt;name&gt;url&lt;/name&gt;
            &lt;value&gt;jdbc:postgresql://localhost/quickstart&lt;/value&gt;
        &lt;/parameter&gt;
        &lt;parameter&gt;
            &lt;name&gt;driverClassName&lt;/name&gt;&lt;value&gt;org.postgresql.Driver&lt;/value&gt;
        &lt;/parameter&gt;
        &lt;parameter&gt;
            &lt;name&gt;username&lt;/name&gt;
            &lt;value&gt;quickstart&lt;/value&gt;
        &lt;/parameter&gt;
        &lt;parameter&gt;
            &lt;name&gt;password&lt;/name&gt;
            &lt;value&gt;secret&lt;/value&gt;
        &lt;/parameter&gt;

        &lt;!-- DBCP connection pooling options --&gt;
        &lt;parameter&gt;
            &lt;name&gt;maxWait&lt;/name&gt;
            &lt;value&gt;3000&lt;/value&gt;
        &lt;/parameter&gt;
        &lt;parameter&gt;
            &lt;name&gt;maxIdle&lt;/name&gt;
            &lt;value&gt;100&lt;/value&gt;
        &lt;/parameter&gt;
        &lt;parameter&gt;
            &lt;name&gt;maxActive&lt;/name&gt;
            &lt;value&gt;10&lt;/value&gt;
        &lt;/parameter&gt;
    &lt;/ResourceParams&gt;
&lt;/Context&gt;</pre><p>
			&#36825;&#20010;&#20363;&#23376;&#20013;&#25105;&#20204;&#35201;&#37197;&#32622;&#30340;&#19978;&#19979;&#25991;&#21483;&#20570;<tt class="literal">quickstart</tt>&#65292;&#23427;&#20301;&#20110;<tt class="literal">TOMCAT/webapp/quickstart</tt>&#30446;&#24405;&#12290;&#35201;&#35775;&#38382;&#20219;&#20309;Servlet,&#22312;&#20320;&#30340;&#27983;&#35272;&#22120;&#20013;&#35775;&#38382;<tt class="literal">http://localhost:8080/quickstart</tt>&#23601;&#21487;&#20197;&#20102;(&#24403;&#28982;&#65292;&#22312;&#21518;&#38754;&#21152;&#19978;&#22312;&#20320;&#30340;<tt class="literal">web.xml</tt>&#25991;&#20214;&#20013;&#21015;&#20986;&#30340;servlet&#30340;&#21517;&#23383;)&#12290;&#20320;&#29616;&#22312;&#21487;&#20197;&#21019;&#24314;&#19968;&#20010;&#21482;&#26377;&#31354;&#30340;<tt class="literal">process()</tt>&#26041;&#27861;&#30340;&#31616;&#21333;servlet&#20102;&#12290;
		</p><p>
            Tomcat&#22312;&#36825;&#20010;&#37197;&#32622;&#19979;&#65292;&#20351;&#29992;DBCP&#36830;&#25509;&#27744;&#65292;&#36890;&#36807;JNDI&#20301;&#32622;&#65306;<tt class="literal">java:comp/env/jdbc/quickstart</tt>&#25552;&#20379;&#24102;&#26377;&#32531;&#20914;&#27744;&#30340;JDBC<tt class="literal">Connection</tt>s&#12290;&#22914;&#26524;&#20320;&#22312;&#35753;&#36830;&#25509;&#27744;&#24037;&#20316;&#30340;&#26102;&#20505;&#36935;&#21040;&#22256;&#38590;&#65292;&#35831;&#26597;&#38405;Tomcat&#25991;&#26723;&#12290;&#22914;&#26524;&#20320;&#24471;&#21040;&#20102;JDBC&#39537;&#21160;&#30340;exception&#20449;&#24687;&#65292;&#35831;&#20808;&#19981;&#35201;&#29992;Hibernate,&#27979;&#35797;JDBC&#36830;&#25509;&#27744;&#26412;&#36523;&#26159;&#21542;&#27491;&#30830;&#12290;Tomcat&#21644;JDBC&#30340;&#25945;&#31243;&#21487;&#20197;&#22312;Web&#19978;&#26597;&#21040;&#12290;
        </p><p>
            &#19979;&#19968;&#27493;&#26159;&#37197;&#32622;hibernate&#65292;&#26469;&#20351;&#29992;&#32465;&#23450;&#21040;JNDI&#30340;&#36830;&#25509;&#27744;&#20013;&#25552;&#20379;&#30340;&#36830;&#25509;&#12290;&#25105;&#20204;&#20351;&#29992;XML&#26684;&#24335;&#30340;Hibernate&#37197;&#32622;&#12290;&#24403;&#28982;&#65292;&#20351;&#29992;properties&#25991;&#20214;&#30340;&#26041;&#24335;&#22312;&#21151;&#33021;&#19978;&#20063;&#26159;&#19968;&#26679;&#30340;&#65292;&#20063;&#19981;&#25552;&#20379;&#20160;&#20040;&#29305;&#21035;&#22909;&#22788;&#12290;&#25105;&#20204;&#29992;XML&#37197;&#32622;&#30340;&#21407;&#22240;&#65292;&#26159;&#22240;&#20026;&#19968;&#33324;&#20250;&#26356;&#26041;&#20415;&#12290;XML&#37197;&#32622;&#25991;&#20214;&#25918;&#22312;&#19978;&#19979;&#25991;&#31867;&#36335;&#24452;(<tt class="literal">WEB-INF/classes</tt>)&#19979;&#38754;&#65292;&#31216;&#20026;<tt class="literal">hibernate.cfg.xml</tt>:
        </p><pre class="programlisting">&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;!DOCTYPE hibernate-configuration
    PUBLIC "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-2.0.dtd"&gt;

&lt;hibernate-configuration&gt;

    &lt;session-factory&gt;

        &lt;property name="connection.datasource"&gt;java:comp/env/jdbc/quickstart&lt;/property&gt;
        &lt;property name="show_sql"&gt;false&lt;/property&gt;
        &lt;property name="dialect"&gt;net.sf.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;

        &lt;!-- Mapping files --&gt;
        &lt;mapping resource="Cat.hbm.xml"/&gt;

    &lt;/session-factory&gt;

&lt;/hibernate-configuration&gt;</pre><p>
            &#25105;&#20204;&#20851;&#38381;&#20102;SQL&#21629;&#20196;&#30340;log,&#21578;&#35785;Hibernate&#20351;&#29992;&#21738;&#31181;SQL&#25968;&#25454;&#24211;&#26041;&#35328;(dialet)&#65292;&#36824;&#26377;&#22914;&#20309;&#24471;&#21040;JDBC&#36830;&#25509;&#65288;&#36890;&#36807;Tomcat&#22768;&#26126;&#25968;&#25454;&#28304;&#27744;&#32465;&#23450;&#30340;JNDI&#22320;&#22336;&#65289;&#12290;&#26041;&#35328;&#26159;&#24517;&#38656;&#30340;&#65292;&#22240;&#20026;&#19981;&#21516;&#30340;&#25968;&#25454;&#24211;&#37117;&#21644;SQL "&#26631;&#20934;"&#26377;&#19968;&#20123;&#20986;&#20837;&#12290;Hibernate&#20250;&#26367;&#20320;&#29031;&#31649;&#36825;&#20123;&#24046;&#24322;&#20043;&#22788;&#65292;&#21457;&#34892;&#21253;&#21253;&#21547;&#20102;&#25152;&#26377;&#20027;&#27969;&#30340;&#21830;&#19994;&#21644;&#24320;&#25918;&#28304;&#20195;&#30721;&#25968;&#25454;&#24211;&#30340;&#26041;&#35328;&#12290;
        </p><p>
            <tt class="literal">SessionFactory</tt>&#26159;Hibernate&#30340;&#27010;&#24565;&#65292;&#23545;&#24212;&#19968;&#20010;&#25968;&#25454;&#23384;&#20648;&#28304;&#65292;&#22914;&#26524;&#26377;&#22810;&#20010;&#25968;&#25454;&#24211;&#65292;&#21487;&#20197;&#21019;&#24314;&#22810;&#20010;XML&#37197;&#32622;&#25991;&#20214;&#65292;&#20063;&#22312;&#20320;&#30340;&#31243;&#24207;&#20013;&#21019;&#24314;&#22810;&#20010;<tt class="literal">Configuration</tt>&#21644;<tt class="literal">SessionFactory</tt>&#23545;&#35937;&#12290;
        </p><p>
            &#22312;<tt class="literal">hibernate.cfg.xml</tt>&#20013;&#30340;&#26368;&#21518;&#19968;&#20010;&#20803;&#32032;&#22768;&#26126;&#20102;<tt class="literal">Cat.hbm.xml</tt>&#26159;&#19968;&#20010;Hibernate XML&#26144;&#23556;&#25991;&#20214;&#65292;&#23545;&#24212;&#25345;&#20037;&#21270;&#31867;<tt class="literal">Cat</tt>&#12290;&#36825;&#20010;&#25991;&#20214;&#21253;&#21547;&#20102;&#25226;POJO&#31867;&#26144;&#23556;&#21040;&#25968;&#25454;&#24211;&#34920;&#65288;&#25110;&#22810;&#20010;&#25968;&#25454;&#24211;&#34920;&#65289;&#30340;&#20803;&#25968;&#25454;&#12290;&#25105;&#20204;&#31245;&#21518;&#23601;&#22238;&#26469;&#30475;&#36825;&#20010;&#25991;&#20214;&#12290;&#35753;&#25105;&#20204;&#20808;&#32534;&#20889;&#36825;&#20010;POJO&#31867;&#65292;&#20877;&#22312;&#22768;&#26126;&#23427;&#30340;&#26144;&#23556;&#20803;&#25968;&#25454;&#12290;
                    </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="quickstart-persistentclass"></a>1.2.&nbsp;&#31532;&#19968;&#20010;&#21487;&#25345;&#20037;&#21270;&#31867;</h2></div></div><div></div></div><p>
            Hibernate&#26368;&#22909;&#30340;&#20351;&#29992;&#26041;&#27861;&#26159;&#20351;&#29992;&#26222;&#36890;&#30340;Java&#23545;&#35937;(Plain Old Java Objects ,&#23601;&#26159;POJOs,&#26377;&#26102;&#20505;&#20063;&#31216;&#20316;Plain Ordinary Java Objects&#65289;&#36825;&#31181;&#32534;&#31243;&#27169;&#22411;&#26469;&#36827;&#34892;&#25345;&#20037;&#21270;&#12290;&#19968;&#20010;POJO&#24456;&#20687;JavaBean,&#23646;&#24615;&#36890;&#36807;getter&#21644;setter&#26041;&#27861;&#35775;&#38382;&#65292;&#23545;&#22806;&#38544;&#34255;&#20102;&#20869;&#37096;&#23454;&#29616;&#30340;&#32454;&#33410;&#12290;
        </p><pre class="programlisting">package net.sf.hibernate.examples.quickstart;

public class Cat {

    private String id;
    private String name;
    private char sex;
    private float weight;

    public Cat() {
    }

    public String getId() {
        return id;
    }

    private void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public char getSex() {
        return sex;
    }

    public void setSex(char sex) {
        this.sex = sex;
    }

    public float getWeight() {
        return weight;
    }

    public void setWeight(float weight) {
        this.weight = weight;
    }

}</pre><p>
            Hibernate&#23545;&#23646;&#24615;&#20351;&#29992;&#30340;&#31867;&#22411;&#19981;&#21152;&#38480;&#21046;&#12290;&#25152;&#26377;&#30340;Java JDK&#31867;&#22411;&#21644;&#21407;&#22987;&#31867;&#22411;&#65288;&#27604;&#22914;<tt class="literal">String</tt>,<tt class="literal">char</tt>&#21644;<tt class="literal">Date</tt>)&#37117;&#21487;&#20197;&#34987;&#26144;&#23556;&#65292;&#20063;&#21253;&#25324;Java &#38598;&#21512;&#26694;&#26550;&#65288;Java collections framework)&#20013;&#30340;&#31867;&#12290;&#20320;&#21487;&#20197;&#25226;&#23427;&#20204;&#26144;&#23556;&#25104;&#20026;&#20540;&#65292;&#20540;&#38598;&#21512;&#65292;&#25110;&#32773;&#19982;&#20854;&#20182;&#23454;&#20307;&#30456;&#20851;&#32852;&#12290;<tt class="literal">id</tt>&#26159;&#19968;&#20010;&#29305;&#27530;&#30340;&#23646;&#24615;&#65292;&#20195;&#34920;&#20102;&#36825;&#20010;&#31867;&#30340;&#25968;&#25454;&#24211;&#26631;&#35782;&#31526;(&#20027;&#38190;)&#65292;&#23545;&#20110;&#31867;&#20284;&#20110;<tt class="literal">Cat</tt>&#36825;&#26679;&#30340;&#23454;&#20307;&#25105;&#20204;&#24378;&#28872;&#24314;&#35758;&#20351;&#29992;&#12290;Hibernate&#21487;&#20197;&#21482;&#22312;&#20869;&#37096;&#20351;&#29992;&#26631;&#35782;&#31526;&#65292;&#20294;&#36825;&#26679;&#25105;&#20204;&#20250;&#22833;&#21435;&#19968;&#20123;&#31243;&#24207;&#32467;&#26500;&#26041;&#38754;&#30340;&#28789;&#27963;&#24615;&#12290;
        </p><p>
            &#25345;&#20037;&#21270;&#31867;&#19981;&#38656;&#35201;&#23454;&#29616;&#20160;&#20040;&#29305;&#21035;&#30340;&#25509;&#21475;&#65292;&#20063;&#19981;&#38656;&#35201;&#20174;&#19968;&#20010;&#29305;&#21035;&#30340;&#25345;&#20037;&#21270;&#26681;&#31867;&#32487;&#25215;&#19979;&#26469;&#12290;Hibernate&#20063;&#19981;&#38656;&#35201;&#20351;&#29992;&#20219;&#20309;&#32534;&#35793;&#26399;&#22788;&#29702;&#65292;&#27604;&#22914;&#23383;&#33410;&#30721;&#22686;&#24378;&#25805;&#20316;&#65292;&#23427;&#29420;&#31435;&#30340;&#20351;&#29992;Java&#21453;&#23556;&#26426;&#21046;&#21644;&#36816;&#34892;&#26102;&#31867;&#22686;&#24378;&#65288;&#36890;&#36807;CGLIB)&#12290;&#25152;&#20197;&#65292;&#22312;Hibernate&#20013;&#65292;POJO&#30340;&#31867;&#19981;&#38656;&#35201;&#20219;&#20309;&#21069;&#25552;&#26465;&#20214;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#25226;&#23427;&#26144;&#23556;&#25104;&#20026;&#25968;&#25454;&#24211;&#34920;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="quickstart-mapping"></a>1.3.&nbsp;&#26144;&#23556;cat</h2></div></div><div></div></div><p>
            <tt class="literal">Cat.hbm.xml</tt>&#26144;&#23556;&#25991;&#20214;&#21253;&#21547;&#20102;&#23545;&#35937;/&#20851;&#31995;&#26144;&#23556;&#25152;&#38656;&#30340;&#20803;&#25968;&#25454;&#12290;&#20803;&#25968;&#25454;&#21253;&#21547;&#25345;&#20037;&#21270;&#31867;&#30340;&#22768;&#26126;&#21644;&#23646;&#24615;&#21040;&#25968;&#25454;&#24211;&#30340;&#26144;&#23556;&#65288;&#25351;&#21521;&#23383;&#27573;&#21644;&#20854;&#20182;&#23454;&#20307;&#30340;&#22806;&#38190;&#20851;&#32852;&#65289;&#12290;
        </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping
    PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd"&gt;

&lt;hibernate-mapping&gt;

    &lt;class name="net.sf.hibernate.examples.quickstart.Cat" table="CAT"&gt;

        &lt;!-- A 32 hex character is our surrogate key. It's automatically
            generated by Hibernate with the UUID pattern. --&gt;
        &lt;id name="id" type="string" unsaved-value="null" &gt;
            &lt;column name="CAT_ID" sql-type="char(32)" not-null="true"/&gt;
            &lt;generator class="uuid.hex"/&gt;
        &lt;/id&gt;

        &lt;!-- A cat has to have a name, but it shouldn' be too long. --&gt;
        &lt;property name="name"&gt;
            &lt;column name="NAME" length="16" not-null="true"/&gt;
        &lt;/property&gt;

        &lt;property name="sex"/&gt;

        &lt;property name="weight"/&gt;

    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
            &#27599;&#20010;&#25345;&#20037;&#21270;&#31867;&#37117;&#24212;&#35813;&#38656;&#35201;&#19968;&#20010;&#26631;&#35782;&#23646;&#24615;&#65288;&#23454;&#38469;&#19978;&#65292;&#21482;&#26159;&#21738;&#20123;&#20195;&#34920;&#23454;&#20307;&#30340;&#31867;&#65292;&#32780;&#19981;&#26159;&#20195;&#34920;&#20540;&#23545;&#35937;&#30340;&#31867;&#65292;&#21518;&#32773;&#20250;&#34987;&#26144;&#23556;&#31216;&#20026;&#23454;&#20307;&#23545;&#35937;&#20013;&#30340;&#19968;&#20010;&#32452;&#20214;&#65289;&#12290;&#36825;&#20010;&#23646;&#24615;&#29992;&#26469;&#21306;&#20998;&#25345;&#20037;&#21270;&#23545;&#35937;&#65306;&#22914;&#26524;<tt class="literal">catA.getId().equals(catB.getId())</tt>&#32467;&#26524;&#26159;true&#30340;&#35805;&#65292;&#20004;&#21482;&#29483;&#23601;&#26159;&#30456;&#21516;&#30340;&#12290;&#36825;&#20010;&#27010;&#24565;&#31216;&#20026;<span class="emphasis"><em>&#25968;&#25454;&#24211;&#26631;&#35782;</em></span>&#12290;Hiernate&#38468;&#24102;&#20102;&#20960;&#31181;&#19981;&#21516;&#30340;&#26631;&#35782;&#31526;&#29983;&#25104;&#22120;&#65292;&#29992;&#20110;&#19981;&#21516;&#30340;&#22330;&#21512;&#65288;&#21253;&#25324;&#25968;&#25454;&#24211;&#26412;&#22320;&#30340;&#39034;&#24207;(sequence)&#29983;&#25104;&#22120;&#12289;hi/lo&#39640;&#20302;&#20301;&#26631;&#35782;&#27169;&#24335;&#12289;&#21644;&#31243;&#24207;&#33258;&#24049;&#23450;&#20041;&#30340;&#26631;&#35782;&#31526;&#65289;&#12290;&#25105;&#20204;&#22312;&#36825;&#37324;&#20351;&#29992;UUID&#29983;&#25104;&#22120;&#65288;&#21482;&#22312;&#27979;&#35797;&#26102;&#24314;&#35758;&#20351;&#29992;&#65292;&#22914;&#26524;&#20351;&#29992;&#25968;&#25454;&#24211;&#33258;&#24049;&#29983;&#25104;&#30340;&#25972;&#25968;&#31867;&#22411;&#30340;&#38190;&#20540;&#26356;&#22909;&#65289;&#65292;&#24182;&#25351;&#23450;<tt class="literal">CAT</tt>&#34920;&#30340;<tt class="literal">CAT_ID</tt>&#23383;&#27573;&#65288;&#20316;&#20026;&#34920;&#30340;&#20027;&#38190;&#65289;&#23384;&#25918;&#29983;&#25104;&#30340;&#26631;&#35782;&#20540;&#12290;
        </p><p>
            <tt class="literal">Cat</tt>&#30340;&#20854;&#20182;&#23646;&#24615;&#37117;&#26144;&#23556;&#21040;&#21516;&#19968;&#20010;&#34920;&#12290;&#23545;<tt class="literal">name</tt>&#23646;&#24615;&#26469;&#35828;&#65292;&#25105;&#20204;&#25226;&#23427;&#26174;&#24335;&#22320;&#22768;&#26126;&#26144;&#23556;&#21040;&#19968;&#20010;&#25968;&#25454;&#24211;&#23383;&#27573;&#12290;&#22914;&#26524;&#25968;&#25454;&#24211;schema&#26159;&#30001;&#26144;&#23556;&#22768;&#26126;&#20351;&#29992;Hibernate&#30340;<span class="emphasis"><em>SchemaExport</em></span>&#24037;&#20855;&#33258;&#21160;&#29983;&#25104;&#30340;&#65288;&#20316;&#20026;SQL DDL&#25351;&#20196;&#65289;&#65292;&#36825;&#29305;&#21035;&#26377;&#29992;&#12290;&#25152;&#26377;&#20854;&#23427;&#30340;&#23646;&#24615;&#37117;&#29992;Hibernate&#30340;&#40664;&#35748;&#20540;&#26144;&#23556;&#65292;&#22823;&#22810;&#25968;&#24773;&#20917;&#20320;&#37117;&#20250;&#36825;&#26679;&#20570;&#12290;&#25968;&#25454;&#24211;&#20013;&#30340;<tt class="literal">CAT</tt>&#34920;&#30475;&#36215;&#26469;&#26159;&#36825;&#26679;&#30340;&#65306;
        </p><pre class="programlisting"> Column |         Type          | Modifiers
--------+-----------------------+-----------
 cat_id | character(32)         | not null
 name   | character varying(16) | not null
 sex    | character(1)          |
 weight | real                  |
Indexes: cat_pkey primary key btree (cat_id)</pre><p>
			&#20320;&#29616;&#22312;&#21487;&#20197;&#22312;&#20320;&#30340;&#25968;&#25454;&#24211;&#20013;&#39318;&#20808;&#21019;&#24314;&#36825;&#20010;&#34920;&#20102;&#65292;&#22914;&#26524;&#20320;&#38656;&#35201;&#20351;&#29992;SchemaExport&#24037;&#20855;&#25226;&#36825;&#20010;&#27493;&#39588;&#33258;&#21160;&#21270;&#65292;&#35831;&#21442;&#38405;<a href="toolsetguide.html" title="&#31532;&nbsp;15&nbsp;&#31456;&nbsp;&#24037;&#20855;&#31665;&#25351;&#21335;">&#31532;&nbsp;15&nbsp;&#31456; <i>&#24037;&#20855;&#31665;&#25351;&#21335;</i></a>&#12290;&#36825;&#20010;&#24037;&#20855;&#33021;&#22815;&#21019;&#24314;&#23436;&#25972;&#30340;SQL DDL&#65292;&#21253;&#25324;&#34920;&#23450;&#20041;&#65292;&#33258;&#23450;&#20041;&#30340;&#23383;&#27573;&#31867;&#22411;&#32422;&#26463;&#65292;&#24799;&#19968;&#32422;&#26463;&#21644;&#32034;&#24341;&#12290;
    	</p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="quickstart-playingwithcats"></a>1.4.&nbsp;&#19982;&#29483;&#21516;&#20048;</h2></div></div><div></div></div><p>
            &#25105;&#20204;&#29616;&#22312;&#21487;&#20197;&#24320;&#22987;Hibernate&#30340;<tt class="literal">Session</tt>&#20102;&#12290;&#23427;&#26159;<span class="emphasis"><em>&#25345;&#20037;&#21270;&#31649;&#29702;&#22120;</em></span>&#25509;&#21475;&#65292;&#25105;&#20204;&#29992;&#23427;&#26469;&#20174;&#25968;&#25454;&#24211;&#20013;&#23384;&#21462;<tt class="literal">Cat</tt>&#12290;&#39318;&#20808;&#65292;&#25105;&#20204;&#35201;&#20174;<tt class="literal">SessionFactory</tt>&#20013;&#33719;&#21462;&#19968;&#20010;<tt class="literal">Session</tt>(Hibernate&#30340;&#24037;&#20316;&#21333;&#20803;&#65289;&#12290;
        </p><pre class="programlisting">SessionFactory sessionFactory =
            new Configuration().configure().buildSessionFactory();</pre><p>
			<tt class="literal">SessionFactory</tt>&#36127;&#36131;&#19968;&#20010;&#25968;&#25454;&#24211;&#65292;&#20063;&#21482;&#23545;&#24212;&#19968;&#20010;XML&#37197;&#32622;&#25991;&#20214;&#65288;<tt class="literal">hibernate.cfg.xml</tt>&#65289;&#12290;&#36890;&#36807;&#22312;&#21019;&#24314; <tt class="literal">SessionFactory</tt><span class="emphasis"><em>&#20043;&#21069;</em></span>&#65288;&#23427;&#26159;&#19981;&#21487;&#21464;&#30340;&#65289;&#65292;&#20320;&#21487;&#20197;&#35775;&#38382;<tt class="literal">Configuration</tt>&#26469;&#35774;&#32622;&#20854;&#20182;&#23646;&#24615;&#65288;&#29978;&#33267;&#20462;&#25913;&#26144;&#23556;&#30340;&#20803;&#25968;&#25454;&#65289;&#12290;&#25105;&#20204;&#24212;&#35813;&#22312;&#21738;&#20799;&#21019;&#24314;<tt class="literal">SessionFactory</tt>&#65292;&#22312;&#25105;&#20204;&#30340;&#31243;&#24207;&#20013;&#21448;&#22914;&#20309;&#35775;&#38382;&#23427;&#21602;&#65311;
			<tt class="literal">SessionFactory</tt>&#36890;&#24120;&#21482;&#26159;&#34987;&#21021;&#22987;&#21270;&#19968;&#27425;&#65292;&#27604;&#22914;&#36890;&#36807;&#19968;&#20010;<span class="emphasis"><em>load-on-startup</em></span> servlet&#12290;&#36825;&#24847;&#21619;&#30528;&#20320;&#19981;&#24212;&#35813;&#22312;serlvet&#20013;&#25226;&#23427;&#20316;&#20026;&#19968;&#20010;&#23454;&#20363;&#21464;&#37327;&#26469;&#25345;&#26377;&#65292;&#24212;&#35813;&#25918;&#22312;&#20854;&#20182;&#22320;&#26041;&#12290;&#26356;&#28145;&#20837;&#19968;&#20123;&#30340;&#35828;&#65292;&#25105;&#20204;&#38656;&#35201;&#26576;&#31181;<span class="emphasis"><em>&#21333;&#20363;&#65288;Singleton&#65289;</em></span>&#27169;&#24335;&#65292;&#25105;&#20204;&#25165;&#33021;&#26356;&#23481;&#26131;&#30340;&#22312;&#31243;&#24207;&#20013;&#35775;&#38382;<tt class="literal">SessionFactory</tt>&#12290;&#19979;&#38754;&#30340;&#26041;&#27861;&#21516;&#26102;&#35299;&#20915;&#20102;&#20004;&#20010;&#38382;&#39064;&#65306;&#37197;&#32622;&#21644;&#23481;&#26131;&#22320;&#35775;&#38382;<tt class="literal">SessionFactory</tt>&#12290;
		</p><p>
		    &#25105;&#20204;&#23454;&#29616;&#19968;&#20010;<tt class="literal">HibernateUtil</tt>&#36741;&#21161;&#31867;&#65306;
		</p><pre class="programlisting">import net.sf.hibernate.*;
import net.sf.hibernate.cfg.*;

public class HibernateUtil {

    private static Log log = LogFactory.getLog(HibernateUtil.class);

    private static final SessionFactory sessionFactory;

    static {
        try {
            // Create the SessionFactory
            sessionFactory = new Configuration().configure().buildSessionFactory();
        } catch (Throwable ex) {
            log.error("Initial SessionFactory creation failed.", ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static final ThreadLocal session = new ThreadLocal();

    public static Session currentSession() throws HibernateException {
        Session s = (Session) session.get();
        // Open a new Session, if this Thread has none yet
        if (s == null) {
            s = sessionFactory.openSession();
            session.set(s);
        }
        return s;
    }

    public static void closeSession() throws HibernateException {
        Session s = (Session) session.get();
        session.set(null);
        if (s != null)
            s.close();
    }
}</pre><p>
			&#36825;&#20010;&#31867;&#19981;&#20294;&#22312;&#23427;&#30340;&#38745;&#24577;&#23646;&#24615;&#20013;&#20351;&#29992;&#20102;<tt class="literal">SessionFactory</tt>&#65292;&#36824;&#20351;&#29992;&#20102;<tt class="literal">ThreadLocal</tt>&#26469;&#20026;&#24403;&#21069;&#24037;&#20316;&#32447;&#31243;&#20445;&#23384;<tt class="literal">Session</tt>&#12290;&#22312;&#20320;&#24819;&#29992;&#36825;&#20010;&#36741;&#21161;&#31867;&#20043;&#21069;&#65292;&#35831;&#30830;&#20445;&#20320;&#29702;&#35299;&#20102;thread-local&#21464;&#37327;&#36825;&#20010;Java&#27010;&#24565;&#12290;
		</p><p>
            <tt class="literal">SessionFactory</tt>&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#24456;&#22810;&#32447;&#31243;&#21487;&#20197;&#21516;&#26102;&#35775;&#38382;&#23427;&#65292;&#33719;&#21462;<tt class="literal">Session</tt>&#12290;<tt class="literal">Session</tt>&#19981;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#23427;&#20195;&#34920;&#19982;&#25968;&#25454;&#24211;&#20043;&#38388;&#30340;&#19968;&#27425;&#25805;&#20316;&#12290;<tt class="literal">Session</tt>&#36890;&#36807;<tt class="literal">SessionFactory</tt>&#25171;&#24320;&#65292;&#22312;&#25152;&#26377;&#30340;&#24037;&#20316;&#23436;&#25104;&#21518;&#65292;&#38656;&#35201;&#20851;&#38381;&#65306;
        </p><pre class="programlisting">Session session = HibernateUtil.currentSession();

Transaction tx= session.beginTransaction();

Cat princess = new Cat();
princess.setName("Princess");
princess.setSex('F');
princess.setWeight(7.4f);

session.save(princess);
tx.commit();

HibernateUtil.closeSession();</pre><p>
            &#22312;<tt class="literal">Session</tt>&#20013;&#65292;&#27599;&#20010;&#25968;&#25454;&#24211;&#25805;&#20316;&#37117;&#26159;&#22312;&#19968;&#20010;&#20107;&#21153;(transaction)&#20013;&#36827;&#34892;&#30340;&#65292;&#36825;&#26679;&#23601;&#21487;&#20197;&#38548;&#31163;&#24320;&#19981;&#21516;&#30340;&#25805;&#20316;&#65288;&#29978;&#33267;&#21253;&#25324;&#21482;&#35835;&#25805;&#20316;&#65289;&#12290;&#25105;&#20204;&#20351;&#29992;Hibernate&#30340;<tt class="literal">Transaction</tt> API&#26469;&#20174;&#24213;&#23618;&#30340;&#20107;&#21153;&#31574;&#30053;&#20013;&#65288;&#26412;&#20363;&#20013;&#26159;JDBC&#20107;&#21153;&#65289;&#33073;&#36523;&#12290;&#36825;&#26679;&#65292;&#22914;&#26524;&#38656;&#35201;&#25226;&#25105;&#20204;&#30340;&#31243;&#24207;&#37096;&#32626;&#21040;&#19968;&#20010;&#30001;&#23481;&#22120;&#31649;&#29702;&#20107;&#21153;&#30340;&#29615;&#22659;&#20013;&#21435;&#65288;&#20351;&#29992;JTA)&#65292;&#25105;&#20204;&#23601;&#19981;&#38656;&#35201;&#26356;&#25913;&#28304;&#20195;&#30721;&#12290;&#35831;&#27880;&#24847;&#65292;&#25105;&#20204;&#19978;&#38754;&#30340;&#20363;&#23376;&#27809;&#26377;&#22788;&#29702;&#20219;&#20309;&#24322;&#24120;&#12290;
        </p><p>
			&#20063;&#35831;&#27880;&#24847;&#65292;&#20320;&#21487;&#20197;&#38543;&#24515;&#25152;&#27442;&#30340;&#22810;&#27425;&#35843;&#29992;<tt class="literal">HibernateUtil.currentSession();</tt>&#65292;&#20320;&#27599;&#27425;&#37117;&#20250;&#24471;&#21040;&#21516;&#19968;&#20010;&#24403;&#21069;&#32447;&#31243;&#30340;<tt class="literal">Session</tt>&#12290;&#20320;&#24517;&#39035;&#30830;&#20445;<tt class="literal">Session</tt>&#22312;&#20320;&#30340;&#25968;&#25454;&#24211;&#35775;&#38382;&#24037;&#20316;&#23436;&#25104;&#21518;&#20851;&#38381;&#65292;&#19981;&#31649;&#26159;&#22312;&#20320;&#30340;servlet&#20195;&#30721;&#20013;&#65292;&#25110;&#32773;&#22312;servlet filter&#20013;&#65292;HTTP&#32467;&#26524;&#36820;&#22238;&#20043;&#21069;&#12290;&#21518;&#32773;&#30340;&#19968;&#20010;&#38468;&#24102;&#22909;&#22788;&#26159;&#65292;&#21487;&#20197;&#23481;&#26131;&#30340;&#20351;&#29992;&#24310;&#36831;&#35013;&#36733;&#65306;<tt class="literal">Session</tt>&#22312;&#28210;&#26579;view&#23618;&#30340;&#26102;&#20505;&#20173;&#28982;&#25171;&#24320;&#30528;&#65292;&#25152;&#20197;&#20320;&#22312;&#36941;&#21382;&#23545;&#35937;&#22270;&#30340;&#26102;&#20505;&#21487;&#20197;&#35013;&#36733;&#25152;&#38656;&#30340;&#23545;&#35937;&#12290;
        </p><p>
            Hibernate&#26377;&#19981;&#21516;&#30340;&#26041;&#27861;&#26469;&#20174;&#25968;&#25454;&#24211;&#20013;&#21462;&#22238;&#23545;&#35937;&#12290;&#26368;&#28789;&#27963;&#30340;&#26041;&#24335;&#26159;&#20351;&#29992;Hibernate&#26597;&#35810;&#35821;&#35328;(HQL),&#36825;&#26159;&#19968;&#31181;&#23481;&#26131;&#23398;&#20064;&#30340;&#35821;&#35328;&#65292;&#26159;&#23545;SQL&#30340;&#38754;&#21521;&#23545;&#35937;&#30340;&#24378;&#22823;&#25193;&#23637;&#12290;
        </p><pre class="programlisting">Transaction tx= session.beginTransaction();

Query query = session.createQuery("select c from Cat as c where c.sex = :sex");
query.setCharacter("sex", 'F');
for (Iterator it = query.iterate(); it.hasNext();) {
    Cat cat = (Cat) it.next();
    out.println("Female Cat: " + cat.getName() );
}

tx.commit();</pre><p>
            Hibernate&#20063;&#25552;&#20379;&#19968;&#31181;&#38754;&#21521;&#23545;&#35937;&#30340;<span class="emphasis"><em>&#25353;&#26465;&#20214;&#26597;&#35810;</em></span>API&#65292;&#21487;&#20197;&#25191;&#34892;&#20844;&#24335;&#21270;&#30340;&#31867;&#22411;&#23433;&#20840;&#30340;&#26597;&#35810;&#12290;&#24403;&#28982;&#65292;Hibernate&#22312;&#25152;&#26377;&#19982;&#25968;&#25454;&#24211;&#30340;&#20132;&#20114;&#20013;&#37117;&#20351;&#29992;<tt class="literal">PrepatedStatement</tt>&#21644;&#21442;&#25968;&#32465;&#23450;&#12290;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;Hibernate&#30340;&#30452;&#25509;SQL&#26597;&#35810;&#21151;&#33021;&#65292;&#25110;&#32773;&#22312;&#29305;&#27530;&#24773;&#20917;&#19979;&#20174;<tt class="literal">Session</tt>&#33719;&#21462;&#19968;&#20010;&#21407;&#22987;&#30340;JDBC&#36830;&#25509;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="quickstart-summary"></a>1.5.&nbsp;&#32467;&#35821;</h2></div></div><div></div></div><p>
            &#22312;&#36825;&#20010;&#30701;&#23567;&#30340;&#25945;&#31243;&#20013;&#65292;&#25105;&#20204;&#21482;&#25551;&#32472;&#20102;Hibernate&#30340;&#22522;&#26412;&#38754;&#30446;&#12290;&#35831;&#27880;&#24847;&#25105;&#20204;&#27809;&#26377;&#22312;&#20363;&#23376;&#20013;&#21253;&#21547;servlet&#30456;&#20851;&#20195;&#30721;&#12290;&#20320;&#24517;&#39035;&#33258;&#34892;&#32534;&#20889;servlet&#65292;&#28982;&#21518;&#25226;&#20320;&#35748;&#20026;&#21512;&#36866;&#30340;Hibernate&#20195;&#30721;&#25554;&#20837;&#12290;
        </p><p>
			&#35831;&#35760;&#20303;Hibernate&#20316;&#20026;&#25968;&#25454;&#24211;&#35775;&#38382;&#23618;&#65292;&#26159;&#19982;&#20320;&#30340;&#31243;&#24207;&#32039;&#23494;&#30456;&#20851;&#30340;&#12290;&#19968;&#33324;&#65292;&#25152;&#26377;&#20854;&#20182;&#23618;&#27425;&#37117;&#20381;&#36182;&#25345;&#20037;&#26426;&#21046;&#12290;&#35831;&#30830;&#20449;&#20320;&#29702;&#35299;&#20102;&#36825;&#31181;&#35774;&#35745;&#30340;&#21547;&#20041;&#12290;
	    </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preface.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">&#19978;&#19968;&#32423;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="architecture.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#21069;&#35328;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20307;&#31995;&#32467;&#26500;</td></tr></table></div></body></html>